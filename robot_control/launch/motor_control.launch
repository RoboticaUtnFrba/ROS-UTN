<launch>
    <arg name="port" default="/dev/ttyACM0" />
    <arg name="baud" default="115200" />
    <arg name="reconfigure" default="true"/>
    <arg name="rviz" default="true"/>

    <!-- Run rosserial node (UPLOAD THE PROGRAM TO YOUR ARDUINO-BASED ROBOT FIRST!) -->
    <include file="$(find robot_control)/launch/serial_node.launch">
      <arg name="port" value="$(arg port)"/>
      <arg name="baud" value="$(arg baud)"/>
    </include>

    <!-- Launch motor control node -->
    <node name="pid_node" pkg="robot_control" type="motor_control.py" required="true"/>

    <!-- Change PID parameters dinamically -->
    <group if="$(arg reconfigure)">
      <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" required="false"/>
    </group>

    <!-- Show in Rviz -->
    <group if="$(arg rviz)">
        <node name="rviz" pkg="rviz" type="rviz" required="false"/>
    </group>

</launch>
